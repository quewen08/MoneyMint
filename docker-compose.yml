version: '3.8'

services:
  money-mint:
    # 编译前端和后端，生成静态文件，可不用
    build:
      context: .
      dockerfile: Dockerfile
    # 镜像名称
    image: quewen/money-mint:latest
    # 容器名称
    container_name: money-mint-app
    ports:
      - "3000:3000"  # 前端服务端口
    volumes:
      - ./backend/data:/app/backend/data  # 数据目录持久化
    environment:
      - TZ=Asia/Shanghai # 时区设置
      - LEDGER_FILE=data/main.bean # 账本文件路径
      - FLASK_ENV=production # Flask 环境
      - JWT_SECRET_KEY=your-secret-key-change-this-in-production # JWT 密钥
      - ADMIN_USERNAME=admin # 管理员用户名
      - ADMIN_PASSWORD=admin123 # 管理员密码
      - ENABLE_REGISTRATION=true # 是否启用注册
      - PAD_EQUITY_ACCOUNT=Equity:Opening-Balances # 填充资产账户
    restart: unless-stopped